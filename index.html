<!DOCTYPE html>
<html lang="en">
<head>
    <title>MineProject</title>
    <link rel="stylesheet" href="index.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <img src="media/logo.png" alt="logo" width="90px" height="90px">
            <p class="logo">MineProject</p>
            <nav>
                <a href="#aboutus">Home</a>
                <a href="#crear-servidor">Servidores</a>
                <a href="#mods">Mods</a>
            </nav>
        </div>
    </header>

    <section id="hero">
        <h1>MineProject</h1>
        <p>Hosting de servidores de Minetest</p>
    </section>

    <section id="aboutus">
        <div class="container">
            <div class="img-container"></div>
            <div class="texto">

                <h2>Sobre <span class="color-acento">Nosotros</span></h2>
                <p>Esta página está dedicada al hosting y creación de servidores del videojuego Minetest. Aquí encontrarás lo necesario para configurar tu servidor, personalizarlo con mods y una experiencia divertida e inolvidable.</p>
            </div>
        </div>
    </section>

    <section id="crear-servidor">
        <div class="container">
            <h2>SERVIDORES</h2>
            <div class="programas">
                <div class="carta">
                    <h3>Crear Servidor Personalizado</h3>
                    <p>Aquí podrás crear tu propio servidor de Minetest. Tendrás que indicar un puerto y el nombre del usuario con el cual accederás.</p>
                    <button onclick="window.location.href='crear_servidor.html'" class="submit-btn button-animation">Crear Servidor</button>
                </div>
                <div class="carta">
                    <h3>Servidores Existentes</h3>
                    <p>Aquí ecnontrarás servidores creados por nosotros mismos. Estos servidores dispondrán de mods predefinidos para que puedas disfrutar de la experiencia de juego.</p>
                    <button onclick="window.location.href='https://content.luanti.org/packages/'" class="submit-btn button-animation">Ver Servidores</button>
                </div>
                <div class="carta">
                    <h3>Estado del Servidor</h3>
                    <p>Consulta el estado actual de tu servidor, número de jugadores conectados, rendimiento y recursos disponibles en tiempo real.</p>
                    <button onclick="window.location.href='estado_servidor.html'" class="submit-btn button-animation">Ver Estado</button>
                </div>
            </div>
        </div>
    </section>

    <section id="mods">
        <div class="container">
            <div class="mods-header">
                <h1>Mods</h1>
            </div>

            <div class="mods-grid">
                <a href="https://content.luanti.org/packages/mt-mods/i3/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/inv.png" alt="i3 mod">
                    </div>
                    <div class="mod-info">
                        <h3>i3</h3>
                        <p class="mod-author">mt-mods</p>
                        <p class="mod-description">Un inventario de próxima generación</p>
                        <div class="mod-tags">
                            <span class="tag">Inventario</span>
                            <span class="tag">Interfaz</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/apercy/motorboat/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/motor.webp" alt="Motorboat">
                    </div>
                    <div class="mod-info">
                        <h3>Motorboat</h3>
                        <p class="mod-author">APercy</p>
                        <p class="mod-description">Añade una lancha motorizada fabricable con física realista y sistema de combustible.</p>
                        <div class="mod-tags">
                            <span class="tag">Transporte</span>
                            <span class="tag">Vehiculos</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/sofar/stamina/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/stamina.png" alt="Stamina">
                    </div>
                    <div class="mod-info">
                        <h3>Stamina</h3>
                        <p class="mod-author">sofar</p>
                        <p class="mod-description">Añade sistema de resistencia, carrera y hambre al juego.</p>
                        <div class="mod-tags">
                            <span class="tag">Efectos</span>
                            <span class="tag">Supervivencia</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/SURV/i_have_hands/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/hands.jpg" alt="I Have Hands">
                    </div>
                    <div class="mod-info">
                        <h3>I Have Hands</h3>
                        <p class="mod-author">SURV</p>
                        <p class="mod-description">Permite transportar bloques con inventario sin romperlos, como cofres o barriles.</p>
                        <div class="mod-tags">
                            <span class="tag">Construcción</span>
                            <span class="tag">Inventario</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/ElCeejo/animalia/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/animalia.png" alt="Animalia">
                    </div>
                    <div class="mod-info">
                        <h3>Animalia</h3>
                        <p class="mod-author">ElCeejo</p>
                        <p class="mod-description">Añade una gran variedad de vida silvestre y expande la exploración con animales domesticables y salvajes.</p>
                        <div class="mod-tags">
                            <span class="tag">Animales</span>
                            <span class="tag">Supervivencia</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/ElCeejo/creatura/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/creatura.png" alt="Creatura">
                    </div>
                    <div class="mod-info">
                        <h3>Creatura</h3>
                        <p class="mod-author">ElCeejo</p>
                        <p class="mod-description">API de alto rendimiento para crear mobs avanzados con física y pathfinding.</p>
                        <div class="mod-tags">
                            <span class="tag">API</span>
                            <span class="tag">Desarrollo</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/AntumDeluge/hidename/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/name.png" alt="Hide Name">
                    </div>
                    <div class="mod-info">
                        <h3>Hide Name</h3>
                        <p class="mod-author">AntumDeluge</p>
                        <p class="mod-description">Permite a los jugadores ocultar su etiqueta de nombre de la vista.</p>
                        <div class="mod-tags">
                            <span class="tag">Efectos</span>
                            <span class="tag">Jugador</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/ApolloX/knives/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/knives.png" alt="Knives">
                    </div>
                    <div class="mod-info">
                        <h3>Knives</h3>
                        <p class="mod-author">ApolloX</p>
                        <p class="mod-description">Añade diversos tipos de cuchillos con daño extremo y modo de poder para daño doble.</p>
                        <div class="mod-tags">
                            <span class="tag">Combat</span>
                            <span class="tag">Herramientas</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/lisacvuk/toolranks/" target="_blank" class="mod-card">
                    <div class="mod-image">
                        <img src="media/tools.png" alt="Tool Ranks">
                    </div>
                    <div class="mod-info">
                        <h3>Tool Ranks</h3>
                        <p class="mod-author">lisacvuk</p>
                        <p class="mod-description">Sistema de niveles para herramientas que mejora su durabilidad y eficiencia al usarlas.</p>
                        <div class="mod-tags">
                            <span class="tag">Herramientas</span>
                            <span class="tag">Progresión</span>
                        </div>
                    </div>
                </a>

                <a href="https://content.luanti.org/packages/?type=mod&sort=score&order=desc" target="_blank" class="mod-card more-mods">
                    <div class="mod-image" style="display: flex; justify-content: center; align-items: center; background-color: rgba(255, 255, 255, 0.9);">
                        <div class="plus-symbol">+</div>
                    </div>
                    <div class="mod-info">
                        <h3>Más Mods</h3>
                        <p class="mod-description">Explora más mods en ContentDB</p>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>2024 - 2025 Trabajo de Sintesis IES Puig Castellar</p>
        </div>
        <img src="media/CreativeCommons.png" alt="licencia" height="45px">
    </footer>

    <main>
        <div class="container">
            <h1>Bienvenido a MineProject</h1>
            <p>Tu plataforma para gestionar servidores de Minetest</p>

            <div class="server-status">
                <h2>Estado de Servidor</h2>
                <div class="server-list">
                    <!-- Aquí se cargarán dinámicamente los servidores -->
                </div>
            </div>

            <div class="features">
                <!-- ... existing code ... -->
            </div>
        </div>
    </main>

    <style>
        .server-status {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .server-status h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .server-list {
            display: grid;
            gap: 15px;
        }

        .server-item {
            background-color: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .server-info {
            flex: 1;
        }

        .server-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .server-details {
            font-size: 14px;
            color: #666;
        }

        .server-controls {
            display: flex;
            gap: 10px;
        }

        .control-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .control-btn.restart {
            background-color: #ffc107;
            color: #000;
        }

        .control-btn.start {
            background-color: #28a745;
            color: white;
        }

        .control-btn.stop {
            background-color: #dc3545;
            color: white;
        }

        .control-btn:hover {
            opacity: 0.9;
        }

        .control-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
    </style>

    <script>
        // Función para cargar el estado de los servidores
        function loadServerStatus() {
            fetch('get_server_status.php')
                .then(response => response.json())
                .then(data => {
                    const serverList = document.querySelector('.server-list');
                    serverList.innerHTML = '';

                    data.servers.forEach(server => {
                        const serverItem = document.createElement('div');
                        serverItem.className = 'server-item';
                        
                        const serverInfo = document.createElement('div');
                        serverInfo.className = 'server-info';
                        
                        const serverName = document.createElement('div');
                        serverName.className = 'server-name';
                        serverName.textContent = server.name;
                        
                        const serverDetails = document.createElement('div');
                        serverDetails.className = 'server-details';
                        serverDetails.textContent = `Puerto: ${server.port} | Estado: ${server.status}`;
                        
                        serverInfo.appendChild(serverName);
                        serverInfo.appendChild(serverDetails);
                        
                        const serverControls = document.createElement('div');
                        serverControls.className = 'server-controls';
                        
                        const restartBtn = document.createElement('button');
                        restartBtn.className = 'control-btn restart';
                        restartBtn.textContent = 'Reiniciar';
                        restartBtn.onclick = () => controlServer(server.name, 'restart');
                        
                        const startBtn = document.createElement('button');
                        startBtn.className = 'control-btn start';
                        startBtn.textContent = 'Iniciar';
                        startBtn.onclick = () => controlServer(server.name, 'start');
                        startBtn.disabled = server.status === 'running';
                        
                        const stopBtn = document.createElement('button');
                        stopBtn.className = 'control-btn stop';
                        stopBtn.textContent = 'Detener';
                        stopBtn.onclick = () => controlServer(server.name, 'stop');
                        stopBtn.disabled = server.status === 'stopped';
                        
                        serverControls.appendChild(restartBtn);
                        serverControls.appendChild(startBtn);
                        serverControls.appendChild(stopBtn);
                        
                        serverItem.appendChild(serverInfo);
                        serverItem.appendChild(serverControls);
                        serverList.appendChild(serverItem);
                    });
                })
                .catch(error => console.error('Error al cargar el estado de los servidores:', error));
        }

        // Función para controlar los servidores
        function controlServer(serverName, action) {
            fetch('control_server.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    serverName: serverName,
                    action: action
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    loadServerStatus(); // Recargar el estado
                } else {
                    alert('Error al ' + action + ' el servidor: ' + data.message);
                }
            })
            .catch(error => console.error('Error al controlar el servidor:', error));
        }

        // Cargar el estado de los servidores al cargar la página
        document.addEventListener('DOMContentLoaded', loadServerStatus);
    </script>
</body>
</html>
